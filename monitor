#!/bin/sh

RIPPLED=${1:-~/dev/rippled-upstream/build/gcc.debug/rippled}
RPC_PORT=${2:-51235}
PEER_PORT=${3:-51235}

echo $RIPPLED $RPC_PORT $PEER_PORT

gnome-terminal --tab -t server_info -e "watch -c -d  -n 0.2 server_info ${RIPPLED} ${RPC_PORT}" \
  --tab-with-profile=Persistent -t balance -e "watch -d=permanent -n 1 balance ${RIPPLED} ${RPC_PORT}" \
  --tab -t peerfinder -e "watch -d -n 0.2 \"${RIPPLED} --rpc_ip=127.0.0.1 --rpc_port=${RPC_PORT} print peerfinder | jq 'del(.result.peerfinder.livecache)'\"" \
  --tab -t get_counts -e "watch -c -d -n 1 ${RIPPLED}  --rpc_ip=127.0.0.1 --rpc_port=${RPC_PORT} get_counts" \
  --tab -t crawl -e "watch -d -n 0.05 curl -k https://127.0.0.1:${PEER_PORT}/crawl" \
  --tab -t top -e "top" \
  --tab -t fee -e "watch -c -d -n 0.1 ${RIPPLED}  --rpc_ip=127.0.0.1 --rpc_port=${RPC_PORT} fee"

